     1                                  %include 'in_out.asm'
     1                              <1> ; in_out.asm
     2                              <1> global sprint, sprintLF, sread, atoi, iprint, iprintLF, quit
     3                              <1> 
     4                              <1> section .text
     5                              <1> 
     6                              <1> ; Вывод строки
     7                              <1> sprint:
     8 00000000 52                  <1>     push edx
     9 00000001 51                  <1>     push ecx
    10 00000002 53                  <1>     push ebx
    11 00000003 50                  <1>     push eax
    12 00000004 E8A8000000          <1>     call slen
    13 00000009 89C2                <1>     mov edx, eax
    14 0000000B 58                  <1>     pop eax
    15 0000000C 89C1                <1>     mov ecx, eax
    16 0000000E BB01000000          <1>     mov ebx, 1
    17 00000013 B804000000          <1>     mov eax, 4
    18 00000018 CD80                <1>     int 0x80
    19 0000001A 5B                  <1>     pop ebx
    20 0000001B 59                  <1>     pop ecx
    21 0000001C 5A                  <1>     pop edx
    22 0000001D C3                  <1>     ret
    23                              <1> 
    24                              <1> ; Вывод строки с переводом строки
    25                              <1> sprintLF:
    26 0000001E E8DDFFFFFF          <1>     call sprint
    27 00000023 50                  <1>     push eax
    28 00000024 B80A000000          <1>     mov eax, 0xA
    29 00000029 50                  <1>     push eax
    30 0000002A 89E0                <1>     mov eax, esp
    31 0000002C E8CFFFFFFF          <1>     call sprint
    32 00000031 58                  <1>     pop eax
    33 00000032 58                  <1>     pop eax
    34 00000033 C3                  <1>     ret
    35                              <1> 
    36                              <1> ; Ввод строки
    37                              <1> sread:
    38 00000034 50                  <1>     push eax
    39 00000035 53                  <1>     push ebx
    40 00000036 B803000000          <1>     mov eax, 3
    41 0000003B BB00000000          <1>     mov ebx, 0
    42 00000040 CD80                <1>     int 0x80
    43 00000042 5B                  <1>     pop ebx
    44 00000043 58                  <1>     pop eax
    45 00000044 C3                  <1>     ret
    46                              <1> 
    47                              <1> ; Преобразование строки в число
    48                              <1> atoi:
    49 00000045 53                  <1>     push ebx
    50 00000046 51                  <1>     push ecx
    51 00000047 52                  <1>     push edx
    52 00000048 31DB                <1>     xor ebx, ebx
    53 0000004A 31C9                <1>     xor ecx, ecx
    54                              <1> .next:
    55 0000004C 8A08                <1>     mov cl, [eax]
    56 0000004E 80F930              <1>     cmp cl, '0'
    57 00000051 7210                <1>     jb .done
    58 00000053 80F939              <1>     cmp cl, '9'
    59 00000056 770B                <1>     ja .done
    60 00000058 80E930              <1>     sub cl, '0'
    61 0000005B 6BDB0A              <1>     imul ebx, 10
    62 0000005E 01CB                <1>     add ebx, ecx
    63 00000060 40                  <1>     inc eax
    64 00000061 EBE9                <1>     jmp .next
    65                              <1> .done:
    66 00000063 89D8                <1>     mov eax, ebx
    67 00000065 5A                  <1>     pop edx
    68 00000066 59                  <1>     pop ecx
    69 00000067 5B                  <1>     pop ebx
    70 00000068 C3                  <1>     ret
    71                              <1> 
    72                              <1> ; Вывод числа
    73                              <1> iprint:
    74 00000069 50                  <1>     push eax
    75 0000006A 51                  <1>     push ecx
    76 0000006B 52                  <1>     push edx
    77 0000006C 56                  <1>     push esi
    78 0000006D B900000000          <1>     mov ecx, 0
    79                              <1> .divide:
    80 00000072 41                  <1>     inc ecx
    81 00000073 BA00000000          <1>     mov edx, 0
    82 00000078 BE0A000000          <1>     mov esi, 10
    83 0000007D F7FE                <1>     idiv esi
    84 0000007F 83C230              <1>     add edx, 48
    85 00000082 52                  <1>     push edx
    86 00000083 83F800              <1>     cmp eax, 0
    87 00000086 75EA                <1>     jnz .divide
    88                              <1> .print:
    89 00000088 49                  <1>     dec ecx
    90 00000089 89E0                <1>     mov eax, esp
    91 0000008B E870FFFFFF          <1>     call sprint
    92 00000090 58                  <1>     pop eax
    93 00000091 83F900              <1>     cmp ecx, 0
    94 00000094 75F2                <1>     jnz .print
    95 00000096 5E                  <1>     pop esi
    96 00000097 5A                  <1>     pop edx
    97 00000098 59                  <1>     pop ecx
    98 00000099 58                  <1>     pop eax
    99 0000009A C3                  <1>     ret
   100                              <1> 
   101                              <1> ; Вывод числа с переводом строки
   102                              <1> iprintLF:
   103 0000009B E8C9FFFFFF          <1>     call iprint
   104 000000A0 50                  <1>     push eax
   105 000000A1 B80A000000          <1>     mov eax, 0xA
   106 000000A6 50                  <1>     push eax
   107 000000A7 89E0                <1>     mov eax, esp
   108 000000A9 E852FFFFFF          <1>     call sprint
   109 000000AE 58                  <1>     pop eax
   110 000000AF 58                  <1>     pop eax
   111 000000B0 C3                  <1>     ret
   112                              <1> 
   113                              <1> ; Длина строки
   114                              <1> slen:
   115 000000B1 53                  <1>     push ebx
   116 000000B2 89C3                <1>     mov ebx, eax
   117                              <1> .next:
   118 000000B4 803800              <1>     cmp byte [eax], 0
   119 000000B7 7403                <1>     jz .finish
   120 000000B9 40                  <1>     inc eax
   121 000000BA EBF8                <1>     jmp .next
   122                              <1> .finish:
   123 000000BC 29D8                <1>     sub eax, ebx
   124 000000BE 5B                  <1>     pop ebx
   125 000000BF C3                  <1>     ret
   126                              <1> 
   127                              <1> ; Завершение программы
   128                              <1> quit:
   129 000000C0 BB00000000          <1>     mov ebx, 0
   130 000000C5 B801000000          <1>     mov eax, 1
   131 000000CA CD80                <1>     int 0x80
     2                                  
     3                                  section .data
     4 00000000 D092D0B2D0B5D0B4D0-         msg1 db 'Введите B: ', 0h
     4 00000009 B8D182D0B520423A20-
     4 00000012 00                 
     5 00000013 D09DD0B0D0B8D0B1D0-         msg2 db "Наибольшее число: ", 0h
     5 0000001C BED0BBD18CD188D0B5-
     5 00000025 D0B520D187D0B8D181-
     5 0000002E D0BBD0BE3A2000     
     6 00000035 32300000                    A dd '20'
     7 00000039 35300000                    C dd '50'
     8                                  
     9                                  section .bss
    10 00000000 <res Ah>                    max resb 10
    11 0000000A <res Ah>                    B resb 10
    12                                  
    13                                  section .text
    14                                  global _start
    15                                  
    16                                  _start:
    17                                      ; ---------- Вывод сообщения 'Введите B: '
    18 000000CC B8[00000000]                mov eax, msg1
    19 000000D1 E82AFFFFFF                  call sprint
    20                                      
    21                                      ; ---------- Ввод 'B'
    22 000000D6 B9[0A000000]                mov ecx, B
    23 000000DB BA0A000000                  mov edx, 10
    24 000000E0 E84FFFFFFF                  call sread
    25                                      
    26                                      ; ---------- Преобразование 'B' из символа в число
    27 000000E5 B8[0A000000]                mov eax, B
    28 000000EA E856FFFFFF                  call atoi
    29 000000EF A3[0A000000]                mov [B], eax
    30                                      
    31                                      ; ---------- Записываем 'A' в переменную 'max'
    32 000000F4 8B0D[35000000]              mov ecx, [A]
    33 000000FA 890D[00000000]              mov [max], ecx
    34                                      
    35                                      ; ---------- Сравниваем 'A' и 'С' (как символы)
    36 00000100 3B0D[39000000]              cmp ecx, [C]
    37 00000106 7F0C                        jg check_B
    38 00000108 8B0D[39000000]              mov ecx, [C]
    39 0000010E 890D[00000000]              mov [max], ecx
    40                                      
    41                                      ; ---------- Преобразование 'max(A,C)' из символа в число
    42                                  check_B:
    43 00000114 B8[00000000]                mov eax, max
    44 00000119 E827FFFFFF                  call atoi
    45 0000011E A3[00000000]                mov [max], eax
    46                                      
    47                                      ; ---------- Сравниваем 'max(A,C)' и 'B' (как числа)
    48 00000123 8B0D[00000000]              mov ecx, [max]
    49 00000129 3B0D[0A000000]              cmp ecx, [B]
    50 0000012F 7F0C                        jg fin
    51 00000131 8B0D[0A000000]              mov ecx, [B]
    52 00000137 890D[00000000]              mov [max], ecx
    53                                      
    54                                      ; ---------- Вывод результата
    55                                  fin:
    56 0000013D B8[13000000]                mov eax, msg2
    57 00000142 E8B9FEFFFF                  call sprint
    58 00000147 A1[00000000]                mov eax, [max]
    59 0000014C E84AFFFFFF                  call iprintLF
    60 00000151 E86AFFFFFF                  call quit
